<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0"/>
    <meta charset="utf-8"/>
    <title>     &raquo; \Doctrine\DBAL\Sharding
</title>
    <meta name="author" content=""/>
    <meta name="description" content=""/>

            <link href="../css/template.css" rel="stylesheet" media="all"/>
    
            <!--[if lt IE 9]>
        <script src="https://html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
        <![endif]-->
        <script src="../js/jquery-1.7.1.min.js" type="text/javascript"></script>
        <script src="../js/jquery-ui-1.8.2.custom.min.js" type="text/javascript"></script>
        <script src="../js/jquery.mousewheel.min.js" type="text/javascript"></script>
        <script src="../js/bootstrap.js" type="text/javascript"></script>
        <script src="../js/template.js" type="text/javascript"></script>
        <script src="../js/prettify/prettify.min.js" type="text/javascript"></script>
    
            <link rel="shortcut icon" href="../img/favicon.ico"/>
        <link rel="apple-touch-icon" href="../img/apple-touch-icon.png"/>
        <link rel="apple-touch-icon" sizes="72x72" href="../img/apple-touch-icon-72x72.png"/>
        <link rel="apple-touch-icon" sizes="114x114" href="../img/apple-touch-icon-114x114.png"/>
    </head>
<body>

        <div class="navbar navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container">
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span> <span class="icon-bar"></span>
                    <span class="icon-bar"></span> </a>
                <a class="brand" href="../index.html">ThinkCode Documentation</a>

                <div class="nav-collapse">
                    <ul class="nav">
                        <li class="dropdown">
                            <a href="#api" class="dropdown-toggle" data-toggle="dropdown">
                                ThinkCode Documentation <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                                                    <li><a>Namespaces</a></li>
                                                                        <li><a href="../namespaces/Application.html">Application</a></li>
                                                                        <li><a href="../namespaces/User.html">User</a></li>
                                                                        <li><a href="../namespaces/SourceCode.html">SourceCode</a></li>
                                                                        <li><a href="../namespaces/ZFTest.html">ZFTest</a></li>
                                                                        <li><a href="../namespaces/ZF.html">ZF</a></li>
                                                                        <li><a href="../namespaces/Zend.html">Zend</a></li>
                                                                        <li><a href="../namespaces/ZendDeveloperTools.html">ZendDeveloperTools</a></li>
                                                                        <li><a href="../namespaces/ZendTest.html">ZendTest</a></li>
                                                                        <li><a href="../namespaces/ZendBench.html">ZendBench</a></li>
                                                                        <li><a href="../namespaces/Composer.html">Composer</a></li>
                                                                        <li><a href="../namespaces/Psr.html">Psr</a></li>
                                                                        <li><a href="../namespaces/Interop.html">Interop</a></li>
                                                                        <li><a href="../namespaces/Doctrine.html">Doctrine</a></li>
                                                                        <li><a href="../namespaces/DoctrineTest.html">DoctrineTest</a></li>
                                                                        <li><a href="../namespaces/DoctrineORMModule.html">DoctrineORMModule</a></li>
                                                                        <li><a href="../namespaces/DoctrineModule.html">DoctrineModule</a></li>
                                                                        <li><a href="../namespaces/Symfony.html">Symfony</a></li>
                                                                                                                                </ul>
                        </li>
                        <li class="dropdown" id="charts-menu">
                            <a href="#charts" class="dropdown-toggle" data-toggle="dropdown">
                                Charts <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../graph_class.html">
                                        <i class="icon-list-alt"></i>&#160;Class hierarchy diagram
                                    </a>
                                </li>
                            </ul>
                        </li>
                        <li class="dropdown" id="reports-menu">
                            <a href="#reports" class="dropdown-toggle" data-toggle="dropdown">
                                Reports <b class="caret"></b>
                            </a>
                            <ul class="dropdown-menu">
                                <li>
                                    <a href="../errors.html">
                                        <i class="icon-list-alt"></i>&#160;Errors
                                    </a>
                                </li>
                                <li>
                                    <a href="../markers.html">
                                        <i class="icon-list-alt"></i>&#160;Markers
                                    </a>
                                </li>
                                <li>
                                    <a href="../deprecated.html">
                                        <i class="icon-list-alt"></i>&#160;Deprecated
                                    </a>
                                </li>
                            </ul>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="go_to_top">
            <a href="#___" style="color: inherit">Back to top&#160;&#160;<i class="icon-upload icon-white"></i></a>
        </div>
    </div>
    
    <div id="___" class="container">
        <noscript>
            <div class="alert alert-warning">
                Javascript is disabled; several features are only available if Javascript is enabled.
            </div>
        </noscript>

        
            
    <div class="row">

        <div class="span4">
            <div class="btn-group view pull-right" data-toggle="buttons-radio">
                <button class="btn details" title="Show descriptions and method names">
                    <i class="icon-list"></i></button><button class="btn simple" title="Show only method names">
                    <i class="icon-align-justify"></i>
                </button>
            </div>
            <ul class="side-nav nav nav-list">
                <li class="nav-header">
                    <i class="icon-map-marker"></i> Namespaces
                </li>
                <a href="../namespaces/Doctrine.DBAL.Sharding.html" title="Sharding">
                    <i class="icon-th"></i> Sharding
                </a>
                <ul class="nav nav-list nav-namespaces">
                        
        <li>
        <a href="../namespaces/Doctrine.DBAL.Sharding.ShardChoser.html" title="ShardChoser">
            <i class="icon-th"></i> ShardChoser
        </a>
        <ul class="nav nav-list nav-namespaces">
                
    
        </ul>
    </li>
        <li>
        <a href="../namespaces/Doctrine.DBAL.Sharding.SQLAzure.html" title="SQLAzure">
            <i class="icon-th"></i> SQLAzure
        </a>
        <ul class="nav nav-list nav-namespaces">
                
        <li>
        <a href="../namespaces/Doctrine.DBAL.Sharding.SQLAzure.Schema.html" title="Schema">
            <i class="icon-th"></i> Schema
        </a>
        <ul class="nav nav-list nav-namespaces">
                
    
        </ul>
    </li>
    
        </ul>
    </li>
    
                </ul>
            </ul>
        </div>

        <div class="span8 namespace-contents">
                
    
        <ul class="breadcrumb">
            <li><a href="../index.html"><i class="icon-th"></i></a></li>
                
                
                
    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.html">Doctrine</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.html">DBAL</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.html">Sharding</a>
    </li>

        </ul>

        
        
                    <div class="namespace-indent">
                <h3><i class="icon-custom icon-class"></i> Classes, interfaces and traits</h3>
                
                                        <div id="interface_ShardManager" class="element ajax clickable interface" data-toggle="collapse" data-target="#interface_ShardManager .collapse">
        <h1>ShardManager<a href="../classes/Doctrine.DBAL.Sharding.ShardManager.html">¶</a></h1>
        <p class="short_description">Sharding Manager gives access to APIs to implementing sharding on top of
Doctrine\DBAL\Connection instances.</p>
        <div class="details collapse">
                            <p>For simplicity and developer ease-of-use (and understanding) the sharding
API only covers single shard queries, no fan-out support. It is primarily
suited for multi-tenant applications.</p>
<p>The assumption about sharding here
is that a distribution value can be found that gives access to all the
necessary data for all use-cases. Switching between shards should be done with
caution, especially if lazy loading is implemented. Any query is always
executed against the last shard that was selected. If a query is created for
a shard Y but then a shard X is selected when its actually executed you
will hit the wrong shard.</p>
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.ShardManager.html" class="more">« More »</a>    </div>

                
                                        <div id="class_PoolingShardConnection" class="element ajax clickable class" data-toggle="collapse" data-target="#class_PoolingShardConnection .collapse">
        <h1>PoolingShardConnection<a href="../classes/Doctrine.DBAL.Sharding.PoolingShardConnection.html">¶</a></h1>
        <p class="short_description">Sharding implementation that pools many different connections
internally and serves data from the currently active connection.</p>
        <div class="details collapse">
                            <p>The internals of this class are:</p>
<ul>
<li>All sharding clients are specified and given a shard-id during
configuration.</li>
<li>By default, the global shard is selected. If no global shard is configured
an exception is thrown on access.</li>
<li>Selecting a shard by distribution value delegates the mapping
&quot;distributionValue&quot; =&gt; &quot;client&quot; to the ShardChooser interface.</li>
<li>An exception is thrown if trying to switch shards during an open
transaction.</li>
</ul>
<p>Instantiation through the DriverManager looks like:</p>
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.PoolingShardConnection.html" class="more">« More »</a>    </div>

                                        <div id="class_PoolingShardManager" class="element ajax clickable class" data-toggle="collapse" data-target="#class_PoolingShardManager .collapse">
        <h1>PoolingShardManager<a href="../classes/Doctrine.DBAL.Sharding.PoolingShardManager.html">¶</a></h1>
        <p class="short_description">Shard Manager for the Connection Pooling Shard Strategy</p>
        <div class="details collapse">
                            
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.PoolingShardManager.html" class="more">« More »</a>    </div>

                                        <div id="class_ShardingException" class="element ajax clickable class" data-toggle="collapse" data-target="#class_ShardingException .collapse">
        <h1>ShardingException<a href="../classes/Doctrine.DBAL.Sharding.ShardingException.html">¶</a></h1>
        <p class="short_description">Sharding related Exceptions</p>
        <div class="details collapse">
                            
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.ShardingException.html" class="more">« More »</a>    </div>

                            </div>
            
                
    
        <ul class="breadcrumb">
            <li><a href="../index.html"><i class="icon-th"></i></a></li>
                
                
                
                
    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.html">Doctrine</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.html">DBAL</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.html">Sharding</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.ShardChoser.html">ShardChoser</a>
    </li>

        </ul>

        
        
                    <div class="namespace-indent">
                <h3><i class="icon-custom icon-class"></i> Classes, interfaces and traits</h3>
                
                                        <div id="interface_ShardChoser" class="element ajax clickable interface" data-toggle="collapse" data-target="#interface_ShardChoser .collapse">
        <h1>ShardChoser<a href="../classes/Doctrine.DBAL.Sharding.ShardChoser.ShardChoser.html">¶</a></h1>
        <p class="short_description">Given a distribution value this shard-choser strategy will pick the shard to
connect to for retrieving rows with the distribution value.</p>
        <div class="details collapse">
                            
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.ShardChoser.ShardChoser.html" class="more">« More »</a>    </div>

                
                                        <div id="class_MultiTenantShardChoser" class="element ajax clickable class" data-toggle="collapse" data-target="#class_MultiTenantShardChoser .collapse">
        <h1>MultiTenantShardChoser<a href="../classes/Doctrine.DBAL.Sharding.ShardChoser.MultiTenantShardChoser.html">¶</a></h1>
        <p class="short_description">The MultiTenant Shard choser assumes that the distribution value directly
maps to the shard id.</p>
        <div class="details collapse">
                            
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.ShardChoser.MultiTenantShardChoser.html" class="more">« More »</a>    </div>

                            </div>
            
    
                
    
        <ul class="breadcrumb">
            <li><a href="../index.html"><i class="icon-th"></i></a></li>
                
                
                
                
    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.html">Doctrine</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.html">DBAL</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.html">Sharding</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.SQLAzure.html">SQLAzure</a>
    </li>

        </ul>

        
        
                    <div class="namespace-indent">
                <h3><i class="icon-custom icon-class"></i> Classes, interfaces and traits</h3>
                
                
                                        <div id="class_SQLAzureFederationsSynchronizer" class="element ajax clickable class" data-toggle="collapse" data-target="#class_SQLAzureFederationsSynchronizer .collapse">
        <h1>SQLAzureFederationsSynchronizer<a href="../classes/Doctrine.DBAL.Sharding.SQLAzure.SQLAzureFederationsSynchronizer.html">¶</a></h1>
        <p class="short_description">SQL Azure Schema Synchronizer.</p>
        <div class="details collapse">
                            <p>Will iterate over all shards when performing schema operations. This is done
by partitioning the passed schema into subschemas for the federation and the
global database and then applying the operations step by step using the
<a href="../classes/Doctrine.DBAL.Schema.Synchronizer.SingleDatabaseSynchronizer.html">\Doctrine\DBAL\Schema\Synchronizer\SingleDatabaseSynchronizer</a>.</p>
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.SQLAzure.SQLAzureFederationsSynchronizer.html" class="more">« More »</a>    </div>

                                        <div id="class_SQLAzureShardManager" class="element ajax clickable class" data-toggle="collapse" data-target="#class_SQLAzureShardManager .collapse">
        <h1>SQLAzureShardManager<a href="../classes/Doctrine.DBAL.Sharding.SQLAzure.SQLAzureShardManager.html">¶</a></h1>
        <p class="short_description">Sharding using the SQL Azure Federations support.</p>
        <div class="details collapse">
                            
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.SQLAzure.SQLAzureShardManager.html" class="more">« More »</a>    </div>

                            </div>
            
                
    
        <ul class="breadcrumb">
            <li><a href="../index.html"><i class="icon-th"></i></a></li>
                
                
                
                
                
    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.html">Doctrine</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.html">DBAL</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.html">Sharding</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.SQLAzure.html">SQLAzure</a>
    </li>

    
    <li>
        <span class="divider">\</span><a href="../namespaces/Doctrine.DBAL.Sharding.SQLAzure.Schema.html">Schema</a>
    </li>

        </ul>

        
        
                    <div class="namespace-indent">
                <h3><i class="icon-custom icon-class"></i> Classes, interfaces and traits</h3>
                
                
                                        <div id="class_MultiTenantVisitor" class="element ajax clickable class" data-toggle="collapse" data-target="#class_MultiTenantVisitor .collapse">
        <h1>MultiTenantVisitor<a href="../classes/Doctrine.DBAL.Sharding.SQLAzure.Schema.MultiTenantVisitor.html">¶</a></h1>
        <p class="short_description">Converts a single tenant schema into a multi-tenant schema for SQL Azure
Federations under the following assumptions:</p>
        <div class="details collapse">
                            <ul>
<li>Every table is part of the multi-tenant application, only explicitly
excluded tables are non-federated. The behavior of the tables being in
global or federated database is undefined. It depends on you selecting a
federation before DDL statements or not.</li>
<li>Every Primary key of a federated table is extended by another column
'tenant_id' with a default value of the SQLAzure function
<code>federation_filtering_value('tenant_id')</code>.</li>
<li>You always have to work with <code>filtering=On</code> when using federations with this
multi-tenant approach.</li>
<li>Primary keys are either using globally unique ids (GUID, Table Generator)
or you explicitly add the tenent_id in every UPDATE or DELETE statement
(otherwise they will affect the same-id rows from other tenents as well).
SQLAzure throws errors when you try to create IDENTIY columns on federated
tables.</li>
</ul>
                    </div>
        <a href="../classes/Doctrine.DBAL.Sharding.SQLAzure.Schema.MultiTenantVisitor.html" class="more">« More »</a>    </div>

                            </div>
            
    
    
    
        </div>
    </div>
    </div>

        <footer class="span12">
            Template is built using <a href="http://twitter.github.com/bootstrap/">Twitter Bootstrap 2</a> and icons provided by
            <a href="http://glyphicons.com/">Glyphicons</a>.<br/>
            Documentation is powered by <a href="http://www.phpdoc.org/">phpDocumentor </a> and<br/>
            generated on Sat, 02 Jun 2018 20:00:55 +0000.<br/>
    </footer>
    </body>
</html>
